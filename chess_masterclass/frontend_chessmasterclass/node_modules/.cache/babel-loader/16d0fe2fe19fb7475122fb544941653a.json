{"ast":null,"code":"import React,{useContext}from'react';import{useParams,Link}from'react-router-dom';import{UserContext}from'../context/UserContext';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Header=function Header(){var _useContext=useContext(UserContext),userInfo=_useContext.userInfo;var _useContext2=useContext(UserContext),logout=_useContext2.logout;console.log({userInfo:userInfo});// \nvar user='{{request.user}}';function getToken(name){var cookieValue=null;if(document.cookie&&document.cookie!==''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=cookies[i].trim();if(cookie.substring(0,name.length+1)===name+'='){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}var csrftoken=getToken('csrftoken');var sendTokens=function sendTokens(){// const url =  \"{% url 'edit-profile-api' %}\"\nvar url=\"http://127.0.0.1:8000/member/edit/api\";fetch(url,{method:'POST',headers:{'Content-Type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(localStorage.getItem('authTokens'))});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Hello \",userInfo.username]}),userInfo.username?/*#__PURE__*/_jsx(\"a\",{onClick:logout,children:\"Logout\"}):/*#__PURE__*/_jsx(Link,{to:'/login',children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:'/',children:/*#__PURE__*/_jsx(\"h1\",{children:\"Chess masterclass\"})}),/*#__PURE__*/_jsx(\"a\",{onClick:sendTokens,href:\"http://127.0.0.1:8000/member/edit/\",children:\"Edit\"}),/*#__PURE__*/_jsx(Link,{to:'member/edit/',children:/*#__PURE__*/_jsx(\"h1\",{children:\"Edit\"})})]});};export default Header;","map":{"version":3,"names":["React","useContext","useParams","Link","UserContext","Header","userInfo","logout","console","log","user","getToken","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","csrftoken","sendTokens","url","fetch","method","headers","body","JSON","stringify","localStorage","getItem","username"],"sources":["C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/chessmasterclass/src/components/Header.js"],"sourcesContent":["import React, {useContext} from 'react'\r\nimport {\r\n    useParams,\r\n    Link\r\n} from 'react-router-dom'\r\nimport {UserContext} from '../context/UserContext'\r\n\r\nconst Header = () => {\r\n  let {userInfo} = useContext(UserContext)\r\n  let {logout} = useContext(UserContext)\r\n  console.log({userInfo})\r\n\r\n  // \r\n  var user = '{{request.user}}'\r\n    function getToken(name) {\r\n        let cookieValue = null;\r\n        if (document.cookie && document.cookie !== '') {\r\n            const cookies = document.cookie.split(';');\r\n            for (let i = 0; i < cookies.length; i++) {\r\n                const cookie = cookies[i].trim();\r\n                if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return cookieValue;\r\n    }\r\n    const csrftoken = getToken('csrftoken');\r\n\r\n    let sendTokens = () =>{\r\n          // const url =  \"{% url 'edit-profile-api' %}\"\r\n          const url =  \"http://127.0.0.1:8000/member/edit/api\"\r\n          fetch(url, {\r\n              method:'POST',\r\n              headers:{\r\n                  'Content-Type':'application/json',\r\n                  'X-CSRFToken': csrftoken,\r\n              },\r\n              body:JSON.stringify(localStorage.getItem('authTokens'))\r\n          })\r\n          \r\n      }\r\n      \r\n\r\n\r\n  return (\r\n    <div>\r\n      <p>Hello {userInfo.username}</p>\r\n        {userInfo.username ? <a onClick={logout}>Logout</a> : <Link to={'/login'}>Login</Link>}\r\n        <Link to={'/'}>\r\n            <h1>Chess masterclass</h1>\r\n        </Link>\r\n\r\n        <a onClick={sendTokens} href='http://127.0.0.1:8000/member/edit/'>Edit</a>\r\n\r\n        <Link to={'member/edit/'}>\r\n            <h1>Edit</h1>\r\n        </Link>\r\n        \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header"],"mappings":"AAAA,MAAOA,MAAP,EAAeC,UAAf,KAAgC,OAAhC,CACA,OACIC,SADJ,CAEIC,IAFJ,KAGO,kBAHP,CAIA,OAAQC,WAAR,KAA0B,wBAA1B,C,wFAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACnB,gBAAiBJ,UAAU,CAACG,WAAD,CAA3B,CAAKE,QAAL,aAAKA,QAAL,CACA,iBAAeL,UAAU,CAACG,WAAD,CAAzB,CAAKG,MAAL,cAAKA,MAAL,CACAC,OAAO,CAACC,GAAR,CAAY,CAACH,QAAQ,CAARA,QAAD,CAAZ,EAEA;AACA,GAAII,KAAI,CAAG,kBAAX,CACE,QAASC,SAAT,CAAkBC,IAAlB,CAAwB,CACpB,GAAIC,YAAW,CAAG,IAAlB,CACA,GAAIC,QAAQ,CAACC,MAAT,EAAmBD,QAAQ,CAACC,MAAT,GAAoB,EAA3C,CAA+C,CAC3C,GAAMC,QAAO,CAAGF,QAAQ,CAACC,MAAT,CAAgBE,KAAhB,CAAsB,GAAtB,CAAhB,CACA,IAAK,GAAIC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,OAAO,CAACG,MAA5B,CAAoCD,CAAC,EAArC,CAAyC,CACrC,GAAMH,OAAM,CAAGC,OAAO,CAACE,CAAD,CAAP,CAAWE,IAAX,EAAf,CACA,GAAIL,MAAM,CAACM,SAAP,CAAiB,CAAjB,CAAoBT,IAAI,CAACO,MAAL,CAAc,CAAlC,IAA0CP,IAAI,CAAG,GAArD,CAA2D,CACvDC,WAAW,CAAGS,kBAAkB,CAACP,MAAM,CAACM,SAAP,CAAiBT,IAAI,CAACO,MAAL,CAAc,CAA/B,CAAD,CAAhC,CACA,MACH,CACJ,CACJ,CACD,MAAON,YAAP,CACH,CACD,GAAMU,UAAS,CAAGZ,QAAQ,CAAC,WAAD,CAA1B,CAEA,GAAIa,WAAU,CAAG,QAAbA,WAAa,EAAK,CAChB;AACA,GAAMC,IAAG,CAAI,uCAAb,CACAC,KAAK,CAACD,GAAD,CAAM,CACPE,MAAM,CAAC,MADA,CAEPC,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,cAAeL,SAFX,CAFD,CAMPM,IAAI,CAACC,IAAI,CAACC,SAAL,CAAeC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAf,CANE,CAAN,CAAL,CASH,CAZH,CAgBF,mBACE,oCACE,8BAAU3B,QAAQ,CAAC4B,QAAnB,GADF,CAEK5B,QAAQ,CAAC4B,QAAT,cAAoB,UAAG,OAAO,CAAE3B,MAAZ,oBAApB,cAAqD,KAAC,IAAD,EAAM,EAAE,CAAE,QAAV,mBAF1D,cAGI,KAAC,IAAD,EAAM,EAAE,CAAE,GAAV,uBACI,yCADJ,EAHJ,cAOI,UAAG,OAAO,CAAEiB,UAAZ,CAAwB,IAAI,CAAC,oCAA7B,kBAPJ,cASI,KAAC,IAAD,EAAM,EAAE,CAAE,cAAV,uBACI,4BADJ,EATJ,GADF,CAgBD,CAvDD,CAyDA,cAAenB,OAAf"},"metadata":{},"sourceType":"module"}