{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{isDisabled}from'@testing-library/user-event/dist/utils';import React from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{alertMsg}from'../../utils/utlis';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfileEmail=function EditProfileEmail(){var navigate=useNavigate();var username=useParams().username;// alerts\nfunction alert(text,id){var alertDiv=document.querySelector(\"#\".concat(id));var msg=document.createElement('p');var btn=document.querySelector('#btn-submit');msg.innerText=text;msg.style.color='red';alertDiv.appendChild(msg);btn.disabled=true;setTimeout(function(){alertDiv.removeChild(msg);btn.disabled=false;},2000);}var changeEmail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var btnToBlock,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:btnToBlock=document.querySelector('#btn-submit-email');btnToBlock.disabled=true;e.preventDefault();_context.next=5;return fetch(\"http://127.0.0.1:8000/member/api/edit/\".concat(username),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({'operation':'email-edit','password':e.target.password.value,'email':e.target.email.value})});case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;if(response.status===200){navigate(\"/profile/\".concat(username));localStorage.setItem('success msg','Profile email has been successfully changed.');}else{alertMsg('edit-email',data['Response msg'],'btn-submit-email');}btnToBlock.disabled=false;case 11:case\"end\":return _context.stop();}}},_callee);}));return function changeEmail(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{width:'20rem',paddingTop:'3rem'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Change email address\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:changeEmail,id:\"edit-email\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline\",id:\"password\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"form2Example2\",type:\"password\",className:\"form-control\",name:\"password\",placeholder:\"Enter password\"}),/*#__PURE__*/_jsx(\"label\",{id:\"password-ID\",className:\"form-label\",htmlFor:\"form2Example2\",children:\"Enter password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline\",id:\"email\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"form2Example2\",type:\"email\",className:\"form-control\",name:\"email\",placeholder:\"Enter new email address\"}),/*#__PURE__*/_jsx(\"label\",{id:\"email-ID\",className:\"form-label\",htmlFor:\"form2Example2\",children:\"Enter new email address\"})]}),/*#__PURE__*/_jsx(\"button\",{id:\"btn-submit-email\",type:\"submit\",className:\"btn btn-primary btn-block\",children:\"Edit email\"})]})]});};export default EditProfileEmail;","map":{"version":3,"names":["isDisabled","React","useParams","useNavigate","Link","alertMsg","EditProfileEmail","navigate","username","alert","text","id","alertDiv","document","querySelector","msg","createElement","btn","innerText","style","color","appendChild","disabled","setTimeout","removeChild","changeEmail","e","btnToBlock","preventDefault","fetch","method","headers","body","JSON","stringify","target","password","value","email","response","json","data","status","localStorage","setItem","width","paddingTop"],"sources":["C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/src/pages/profile_edit/EditProfileEmail.js"],"sourcesContent":["import { isDisabled } from '@testing-library/user-event/dist/utils'\r\nimport React from 'react'\r\n\r\nimport {\r\n    useParams, \r\n    useNavigate,\r\n    Link,\r\n       \r\n} from 'react-router-dom'\r\nimport {alertMsg} from '../../utils/utlis'\r\n\r\nconst EditProfileEmail = () => {\r\n    const navigate = useNavigate()\r\n\r\n    let username = useParams().username\r\n\r\n    // alerts\r\n    function alert(text, id){\r\n        let alertDiv = document.querySelector(`#${id}`)\r\n        let msg = document.createElement('p')            \r\n        let btn = document.querySelector('#btn-submit')\r\n\r\n        msg.innerText = text\r\n        msg.style.color = 'red'\r\n        alertDiv.appendChild(msg)        \r\n        btn.disabled = true\r\n        setTimeout(() => {\r\n            alertDiv.removeChild(msg);\r\n            btn.disabled = false\r\n          }, 2000)        \r\n    }\r\n\r\n    let changeEmail = async (e)  => {\r\n        let btnToBlock = document.querySelector('#btn-submit-email')  \r\n        btnToBlock.disabled = true \r\n        e.preventDefault()\r\n        let response = await fetch(`http://127.0.0.1:8000/member/api/edit/${username}`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                'operation': 'email-edit',\r\n                'password': e.target.password.value,\r\n                'email': e.target.email.value,\r\n            })\r\n        })\r\n        let data = await response.json()\r\n        if(response.status === 200){\r\n            navigate(`/profile/${username}`)\r\n            localStorage.setItem('success msg', 'Profile email has been successfully changed.')            \r\n        }else{\r\n            alertMsg('edit-email', data['Response msg'], 'btn-submit-email')\r\n        }\r\n        \r\n        btnToBlock.disabled = false \r\n\r\n    }\r\n\r\n  return (\r\n    <div className='container' style={{width: '20rem',paddingTop:'3rem',}}>\r\n        <h3>Change email address</h3>\r\n        <form onSubmit={changeEmail} id='edit-email'>\r\n            <div className=\"form-outline\" id='password'>\r\n                <input id='form2Example2' type=\"password\" className=\"form-control\" name=\"password\" placeholder=\"Enter password\"/>\r\n                <label id='password-ID' className=\"form-label\" htmlFor=\"form2Example2\">Enter password</label>\r\n            </div>\r\n            <div className=\"form-outline\" id='email'>\r\n                <input id='form2Example2' type=\"email\" className=\"form-control\" name=\"email\" placeholder=\"Enter new email address\"/>\r\n                <label id='email-ID' className=\"form-label\" htmlFor=\"form2Example2\">Enter new email address</label>\r\n            </div>\r\n            <button id='btn-submit-email' type=\"submit\" className=\"btn btn-primary btn-block\" >Edit email</button>\r\n            \r\n        </form>\r\n        \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditProfileEmail"],"mappings":"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"},"metadata":{},"sourceType":"module"}