{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useContext}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{alertMsg}from'../../utils/utlis';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfilePass=function EditProfilePass(){var navigate=useNavigate();var username=useParams().username;var changePassword=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var btnToBlock,response,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:btnToBlock=document.querySelector('#btn-submit-editpass');btnToBlock.disabled=true;e.preventDefault();if(!(e.target.old_password.value&&e.target.new_password.value&&e.target.new_password2.value)){_context.next=17;break;}if(!(e.target.new_password.value===e.target.new_password2.value)){_context.next=14;break;}_context.next=7;return fetch(\"http://127.0.0.1:8000/member/api/edit/\".concat(username),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({'operation':'password-edit','old_password':e.target.old_password.value,'new_password':e.target.new_password.value})});case 7:response=_context.sent;_context.next=10;return response.json();case 10:status=_context.sent;if(response.status===200){navigate(\"/profile/\".concat(username));localStorage.setItem('success msg','Profile password has been successfully changed.');}else if(status.password){status.password[0].forEach(function(msg){alertMsg('new_password2',msg,'btn-submit-editpass');});}_context.next=15;break;case 14:alertMsg('new_password2','Passwords are not the same!','btn-submit-editpass');case 15:_context.next=18;break;case 17:alertMsg('edit-pass','Please fill all fields.','btn-submit-editpass');case 18:btnToBlock.disabled=false;case 19:case\"end\":return _context.stop();}}},_callee);}));return function changePassword(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{width:'20rem',paddingTop:'3rem'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Change Password\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:changePassword,id:\"edit-pass\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline\",id:\"old_password\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"old_password\",type:\"password\",className:\"form-control\",name:\"old_password\",placeholder:\"Enter old password\"}),/*#__PURE__*/_jsx(\"label\",{id:\"old_password-ID\",className:\"form-label\",htmlFor:\"old_password\",children:\"Enter old password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline\",id:\"new_password\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"new_password\",type:\"password\",className:\"form-control\",name:\"new_password\",placeholder:\"Enter new password\"}),/*#__PURE__*/_jsx(\"label\",{id:\"new_password-ID\",className:\"form-label\",htmlFor:\"new_password\",children:\"Enter new password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-outline\",id:\"new_password2\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"new_password2\",type:\"password\",className:\"form-control\",name:\"new_password2\",placeholder:\"Repeat new password\"}),/*#__PURE__*/_jsx(\"label\",{id:\"new_password2-ID\",className:\"form-label\",htmlFor:\"new_password2\",children:\"Repeat new password\"})]}),/*#__PURE__*/_jsx(\"button\",{id:\"btn-submit-editpass\",type:\"submit\",className:\"btn btn-primary btn-block\",children:\"Change password\"})]})]});};export default EditProfilePass;","map":{"version":3,"names":["React","useContext","useParams","useNavigate","Link","alertMsg","EditProfilePass","navigate","username","changePassword","e","btnToBlock","document","querySelector","disabled","preventDefault","target","old_password","value","new_password","new_password2","fetch","method","headers","body","JSON","stringify","response","json","status","localStorage","setItem","password","forEach","msg","width","paddingTop"],"sources":["C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/src/pages/profile_edit/EditProfilePass.js"],"sourcesContent":["import React, {useContext} from 'react'\r\nimport {\r\n    useParams, \r\n    useNavigate,\r\n    Link,\r\n       \r\n} from 'react-router-dom'\r\nimport {alertMsg} from '../../utils/utlis'\r\n\r\nconst EditProfilePass = () => {\r\n\r\n    const navigate = useNavigate()\r\n\r\n    let username = useParams().username\r\n    \r\n\r\n    let changePassword = async (e)  => {\r\n        let btnToBlock = document.querySelector('#btn-submit-editpass')  \r\n        btnToBlock.disabled = true\r\n        e.preventDefault()\r\n        if(e.target.old_password.value && e.target.new_password.value && e.target.new_password2.value){\r\n            if(e.target.new_password.value === e.target.new_password2.value){\r\n                            let response = await fetch(`http://127.0.0.1:8000/member/api/edit/${username}`, {\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    'Content-Type': 'application/json',\r\n                                },\r\n                                body: JSON.stringify({\r\n                                    'operation': 'password-edit',\r\n                                    'old_password': e.target.old_password.value,\r\n                                    'new_password': e.target.new_password.value,\r\n                                })\r\n                                })\r\n                                let status = await response.json()\r\n                                    \r\n                                if(response.status === 200){\r\n                                    navigate(`/profile/${username}`)\r\n                                    localStorage.setItem('success msg', 'Profile password has been successfully changed.')         \r\n                                }else if(status.password){\r\n                                    status.password[0].forEach(msg => {\r\n                                        alertMsg('new_password2', msg, 'btn-submit-editpass')\r\n                                    });\r\n                                    \r\n                                }                       \r\n            }else{\r\n                alertMsg('new_password2', 'Passwords are not the same!', 'btn-submit-editpass')\r\n            }\r\n\r\n        }else{\r\n            alertMsg('edit-pass', 'Please fill all fields.', 'btn-submit-editpass')\r\n        }\r\n        btnToBlock.disabled = false\r\n        }\r\n    \r\n\r\n\r\n  return (\r\n    <div className='container' style={{width: '20rem',paddingTop:'3rem',}}>\r\n        <h3>Change Password</h3>\r\n        <form onSubmit={changePassword} id='edit-pass'>\r\n            <div className=\"form-outline\" id='old_password'>\r\n                <input id='old_password' type=\"password\" className=\"form-control\" name=\"old_password\" placeholder=\"Enter old password\"/>\r\n                <label id='old_password-ID' className=\"form-label\" htmlFor=\"old_password\">Enter old password</label>\r\n            </div>\r\n            <div className=\"form-outline\" id='new_password'>\r\n                <input id='new_password' type=\"password\" className=\"form-control\" name=\"new_password\" placeholder=\"Enter new password\"/>\r\n                <label id='new_password-ID' className=\"form-label\" htmlFor=\"new_password\">Enter new password</label>\r\n            </div>\r\n            <div className=\"form-outline\" id='new_password2'>\r\n                <input id='new_password2' type=\"password\" className=\"form-control\" name=\"new_password2\" placeholder=\"Repeat new password\"/>\r\n                <label id='new_password2-ID' className=\"form-label\" htmlFor=\"new_password2\">Repeat new password</label>\r\n            </div>\r\n            \r\n            <button id='btn-submit-editpass' type=\"submit\" className=\"btn btn-primary btn-block\" >Change password</button>\r\n            \r\n        </form>\r\n\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditProfilePass"],"mappings":"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"},"metadata":{},"sourceType":"module"}