{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from'react';import{UserContext}from'../context/UserContext';import{useParams,Link,useNavigate}from'react-router-dom';import ChessBoard from'../components/ChessBoard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CoursePage=function CoursePage(){var _useContext=useContext(UserContext),userInfo=_useContext.userInfo;var navigate=useNavigate();// get dynamic ID (from App.js course/:id)\nvar courseSlug=useParams().slug;// list of course detail\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),courseDetails=_useState2[0],setcourseDetails=_useState2[1];// fetch course details\nvar courseDetailGET=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://127.0.0.1:8000/api/courses/\".concat(courseSlug));case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setcourseDetails(data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function courseDetailGET(){return _ref.apply(this,arguments);};}();// effect function to check if there is an API call possible\nuseEffect(function(){courseDetailGET();},[]);var getPrice=function getPrice(price){if(price==='0.00'){return price='FREE';}else{return price;}};var isPremium=function isPremium(props,userInfo){if(parseFloat(userInfo.credit)>=props.price&&userInfo.isActive==='true'){return true;}else if(props.price==='0.00'&&userInfo.isActive==='false'){return true;}else{return false;}};var navigateToPayment=function navigateToPayment(){navigate('/');};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:isPremium(courseDetails,userInfo)?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"fs-1\",children:courseDetails.name}),/*#__PURE__*/_jsx(\"p\",{className:\"fs-6\",children:courseDetails.body}),/*#__PURE__*/_jsx(ChessBoard,{})]}):navigateToPayment()});};export default CoursePage;","map":{"version":3,"names":["React","useState","useEffect","useContext","UserContext","useParams","Link","useNavigate","ChessBoard","CoursePage","userInfo","navigate","courseSlug","slug","courseDetails","setcourseDetails","courseDetailGET","fetch","response","json","data","getPrice","price","isPremium","props","parseFloat","credit","isActive","navigateToPayment","name","body"],"sources":["C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/src/pages/CoursePage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\nimport {UserContext} from '../context/UserContext'\r\n\r\nimport {\r\n    useParams,\r\n    Link,\r\n    useNavigate\r\n} from 'react-router-dom'\r\nimport ChessBoard from '../components/ChessBoard'\r\n\r\nconst CoursePage = () => {\r\n    let {userInfo} = useContext(UserContext)\r\n    let navigate = useNavigate()\r\n    \r\n    // get dynamic ID (from App.js course/:id)\r\n    let courseSlug = useParams().slug\r\n\r\n    // list of course detail\r\n    let [courseDetails, setcourseDetails] = useState([])\r\n\r\n    // fetch course details\r\n    let courseDetailGET = async () => {\r\n        let response = await fetch(`http://127.0.0.1:8000/api/courses/${courseSlug}`)\r\n        let data = await response.json()\r\n        setcourseDetails(data)\r\n    }\r\n    \r\n    // effect function to check if there is an API call possible\r\n    useEffect(() => {\r\n        courseDetailGET()\r\n    }, [])\r\n\r\n    let getPrice = (price) => {        \r\n        if(price === '0.00'){\r\n            return price = 'FREE'\r\n        }else{\r\n            return price\r\n        }\r\n    }   \r\n\r\n    let isPremium = (props, userInfo) => {\r\n        if(parseFloat(userInfo.credit) >= props.price && userInfo.isActive === 'true'){\r\n            return true\r\n        }else if(props.price === '0.00' && userInfo.isActive === 'false'){\r\n            return true\r\n        }        \r\n        else{\r\n            return false\r\n        }\r\n    }\r\n\r\n    let navigateToPayment = () => {\r\n        navigate('/')\r\n    }\r\n    \r\n\r\n\r\n  return (\r\n    <div className='container'>\r\n        {isPremium(courseDetails, userInfo) ?\r\n            <div>\r\n                <p className=\"fs-1\">{courseDetails.name}</p>\r\n                <p className=\"fs-6\">{courseDetails.body}</p>   \r\n                <ChessBoard />\r\n            </div>\r\n            :\r\n            navigateToPayment()\r\n        }\r\n        \r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CoursePage"],"mappings":"siBAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,OAAQC,WAAR,KAA0B,wBAA1B,CAEA,OACIC,SADJ,CAEIC,IAFJ,CAGIC,WAHJ,KAIO,kBAJP,CAKA,MAAOC,WAAP,KAAuB,0BAAvB,C,wFAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CACrB,gBAAiBN,UAAU,CAACC,WAAD,CAA3B,CAAKM,QAAL,aAAKA,QAAL,CACA,GAAIC,SAAQ,CAAGJ,WAAW,EAA1B,CAEA;AACA,GAAIK,WAAU,CAAGP,SAAS,GAAGQ,IAA7B,CAEA;AACA,cAAwCZ,QAAQ,CAAC,EAAD,CAAhD,wCAAKa,aAAL,eAAoBC,gBAApB,eAEA;AACA,GAAIC,gBAAe,4FAAG,6KACGC,MAAK,6CAAsCL,UAAtC,EADR,QACdM,QADc,qCAEDA,SAAQ,CAACC,IAAT,EAFC,QAEdC,IAFc,eAGlBL,gBAAgB,CAACK,IAAD,CAAhB,CAHkB,sDAAH,kBAAfJ,gBAAe,0CAAnB,CAMA;AACAd,SAAS,CAAC,UAAM,CACZc,eAAe,GAClB,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAIK,SAAQ,CAAG,QAAXA,SAAW,CAACC,KAAD,CAAW,CACtB,GAAGA,KAAK,GAAK,MAAb,CAAoB,CAChB,MAAOA,MAAK,CAAG,MAAf,CACH,CAFD,IAEK,CACD,MAAOA,MAAP,CACH,CACJ,CAND,CAQA,GAAIC,UAAS,CAAG,QAAZA,UAAY,CAACC,KAAD,CAAQd,QAAR,CAAqB,CACjC,GAAGe,UAAU,CAACf,QAAQ,CAACgB,MAAV,CAAV,EAA+BF,KAAK,CAACF,KAArC,EAA8CZ,QAAQ,CAACiB,QAAT,GAAsB,MAAvE,CAA8E,CAC1E,MAAO,KAAP,CACH,CAFD,IAEM,IAAGH,KAAK,CAACF,KAAN,GAAgB,MAAhB,EAA0BZ,QAAQ,CAACiB,QAAT,GAAsB,OAAnD,CAA2D,CAC7D,MAAO,KAAP,CACH,CAFK,IAGF,CACA,MAAO,MAAP,CACH,CACJ,CATD,CAWA,GAAIC,kBAAiB,CAAG,QAApBA,kBAAoB,EAAM,CAC1BjB,QAAQ,CAAC,GAAD,CAAR,CACH,CAFD,CAMF,mBACE,YAAK,SAAS,CAAC,WAAf,UACKY,SAAS,CAACT,aAAD,CAAgBJ,QAAhB,CAAT,cACG,oCACI,UAAG,SAAS,CAAC,MAAb,UAAqBI,aAAa,CAACe,IAAnC,EADJ,cAEI,UAAG,SAAS,CAAC,MAAb,UAAqBf,aAAa,CAACgB,IAAnC,EAFJ,cAGI,KAAC,UAAD,IAHJ,GADH,CAOGF,iBAAiB,EARzB,EADF,CAeD,CA9DD,CAgEA,cAAenB,WAAf"},"metadata":{},"sourceType":"module"}