{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useEffect}from'react';import{UserContext}from'../../context/UserContext';import{useParams,useNavigate,Link}from'react-router-dom';import{premiumPlanName}from'../../utils/utlis';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfile=function EditProfile(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var navigateLogin=useNavigate();var _useContext=useContext(UserContext),userInfo=_useContext.userInfo;var username=useParams().username;var getUserData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://127.0.0.1:8000/member/api/edit/\".concat(username));case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setUserData(data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getUserData(){return _ref.apply(this,arguments);};}();function isAuthenticated(username,userInfo){if(username===userInfo.username){return true;}else{return false;}}var checkForMsgs=function checkForMsgs(){if(localStorage.getItem('success msg')){var msgDiv=document.querySelector('#success-div');var msgBar=document.createElement('p');var msg=localStorage.getItem('success msg');msgBar.innerText=msg;msgBar.style.color='green';msgDiv.appendChild(msgBar);setTimeout(function(){msgDiv.removeChild(msgBar);localStorage.clear();},3000);}};var navigateToLogin=function navigateToLogin(){navigateLogin('/login');};useEffect(function(){getUserData();checkForMsgs();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{paddingTop:'3rem'},id:\"success-div\",children:isAuthenticated(username,userInfo)?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'left'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Profile info:\"}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped-columns\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{width:'15rem'},children:\"Username:\"}),/*#__PURE__*/_jsxs(\"th\",{children:[userData.username,\" \",/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(username,\"/edit/pass\"),className:\"fst-italic\",style:{fontSize:'0.8rem'},children:\"EDIT PASSWORD\"})]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{width:'15rem'},children:\"Email address:\"}),/*#__PURE__*/_jsxs(\"th\",{children:[userData.email,\" \",/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(username,\"/edit/email\"),className:\"fst-italic\",style:{fontSize:'0.8rem'},children:\"EDIT\"})]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{width:'15rem'},children:\"First Name:\"}),/*#__PURE__*/_jsxs(\"th\",{children:[userData.first_name,\" \",/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(username,\"/edit/name\"),className:\"fst-italic\",style:{fontSize:'0.8rem'},children:\"EDIT\"})]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{width:'15rem'},children:\"Last Name:\"}),/*#__PURE__*/_jsxs(\"th\",{children:[userData.last_name,\" \",/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(username,\"/edit/name\"),className:\"fst-italic\",style:{fontSize:'0.8rem'},children:\"EDIT\"})]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{width:'15rem'},children:\"Current Premium Plan:\"}),/*#__PURE__*/_jsx(\"th\",{children:premiumPlanName(userInfo)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{width:'15rem'},children:\"Expiration day:\"}),/*#__PURE__*/_jsx(\"th\",{children:userData.expiration_date})]})]})})]}):navigateToLogin()});};export default EditProfile;","map":{"version":3,"names":["React","useState","useContext","useEffect","UserContext","useParams","useNavigate","Link","premiumPlanName","EditProfile","userData","setUserData","navigateLogin","userInfo","username","getUserData","fetch","response","json","data","isAuthenticated","checkForMsgs","localStorage","getItem","msgDiv","document","querySelector","msgBar","createElement","msg","innerText","style","color","appendChild","setTimeout","removeChild","clear","navigateToLogin","paddingTop","textAlign","width","fontSize","email","first_name","last_name","expiration_date"],"sources":["C:/Users/tomas/Desktop/chess-masterclass/backend/chess_masterclass/frontend_chessmasterclass/src/pages/profile_edit/EditProfile.js"],"sourcesContent":["import React, {useState, useContext, useEffect} from 'react'\r\nimport {UserContext} from '../../context/UserContext'\r\nimport {\r\n    useParams, \r\n    useNavigate,\r\n    Link   \r\n} from 'react-router-dom'\r\nimport {premiumPlanName} from '../../utils/utlis'\r\n\r\nconst EditProfile = () => {\r\n    let [userData, setUserData] = useState([])\r\n    let navigateLogin = useNavigate()\r\n\r\n    let {userInfo} = useContext(UserContext)\r\n    let username = useParams().username\r\n\r\n    let getUserData = async ()  => {\r\n        let response = await fetch(`http://127.0.0.1:8000/member/api/edit/${username}`)\r\n        let data = await response.json()\r\n        setUserData(data)\r\n    }\r\n\r\n    function isAuthenticated(username, userInfo){\r\n      if(username === userInfo.username){\r\n        return true\r\n      }else{\r\n        return false\r\n      }\r\n    } \r\n\r\n    let checkForMsgs = () => {\r\n      if(localStorage.getItem('success msg')){\r\n        let msgDiv = document.querySelector('#success-div')\r\n        let msgBar = document.createElement('p')\r\n        let msg = localStorage.getItem('success msg')\r\n\r\n        msgBar.innerText = msg\r\n        msgBar.style.color = 'green'\r\n        msgDiv.appendChild(msgBar)\r\n        setTimeout(() => {\r\n          msgDiv.removeChild(msgBar)\r\n          localStorage.clear()\r\n        }, 3000)\r\n      }\r\n    }\r\n\r\n    let navigateToLogin = () => {\r\n      navigateLogin('/login')\r\n    }  \r\n\r\n    useEffect(() => {\r\n      getUserData()\r\n      checkForMsgs()\r\n    }, [])\r\n\r\n  return (\r\n    \r\n    <div className='container' style={{paddingTop:'3rem'}} id='success-div'>\r\n      {isAuthenticated(username, userInfo) ? \r\n        <div style={{textAlign:'left',}} >\r\n          <h2>Profile info:</h2>\r\n          <table className=\"table table-striped-columns\">            \r\n            <tbody>\r\n              <tr>\r\n                <td style={{width:'15rem'}}>Username:</td>\r\n                <th>{userData.username} <Link to={`/profile/${username}/edit/pass`} className='fst-italic' style={{fontSize:'0.8rem'}}>EDIT PASSWORD</Link></th>              \r\n              </tr>\r\n              <tr>\r\n                <td style={{width:'15rem'}}>Email address:</td>\r\n                <th>{userData.email} <Link to={`/profile/${username}/edit/email`} className='fst-italic' style={{fontSize:'0.8rem'}}>EDIT</Link></th>              \r\n              </tr>\r\n              <tr>\r\n                <td style={{width:'15rem'}}>First Name:</td>\r\n                <th>{userData.first_name} <Link to={`/profile/${username}/edit/name`} className='fst-italic' style={{fontSize:'0.8rem'}}>EDIT</Link></th>              \r\n              </tr>\r\n              <tr>\r\n                <td style={{width:'15rem'}}>Last Name:</td>\r\n                <th>{userData.last_name} <Link to={`/profile/${username}/edit/name`} className='fst-italic' style={{fontSize:'0.8rem'}}>EDIT</Link></th>              \r\n              </tr>\r\n              <tr>\r\n                <td style={{width:'15rem'}}>Current Premium Plan:</td>\r\n                <th>{premiumPlanName(userInfo)}</th>              \r\n              </tr>\r\n              <tr>\r\n                <td style={{width:'15rem'}}>Expiration day:</td>\r\n                <th>{userData.expiration_date}</th>              \r\n              </tr>                        \r\n            </tbody>\r\n          </table>  \r\n        </div>\r\n          :\r\n            navigateToLogin()\r\n          }\r\n           \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditProfile"],"mappings":"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"},"metadata":{},"sourceType":"module"}